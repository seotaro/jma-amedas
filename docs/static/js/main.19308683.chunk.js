(this["webpackJsonpjma-amedas"]=this["webpackJsonpjma-amedas"]||[]).push([[0],{143:function(n,t){},184:function(n,t,e){},189:function(n,t){},196:function(n,t,e){"use strict";e.r(t);var a=e(1),r=e.n(a),o=e(31),i=e.n(o),c=(e(184),e(63)),u=e.n(c),l=e(97),s=e(89),m=e(248),p=e(252),d=e(245),h=e(250),f=e(244),j=e(161),b=Object(j.a)({palette:{primary:{main:"#111111",background:"#eeeeee",opacity:.8},secondary:{main:"#eeeeee"}},typography:{fontFamily:["Noto Sans","sans-serif"].join(","),h1:{fontSize:24,fontWeight:"600"},body1:{fontSize:16,fontWeight:"300"}}}),w=e(238),x=e(243),O=e(247),g=e(164),v=e(254),y=e(165),k=e(251),S=e(140),z=e.n(S),F=e(119),C=e.n(F),D="https://www.jma.go.jp/bosai/amedas/const/amedastable.json",M="https://www.jma.go.jp/bosai/amedas/data/latest_time.txt",P=function(n){return"https://www.jma.go.jp/bosai/amedas/data/map/".concat(C()(n).format("YYYYMMDDHHmmss"),".json")},E=function(n,t,e){return n?(n-t)/(e-t):null},V=function(n,t,e){return n?t*(1-n)+e*n:null};function J(n,t,e){360<=n&&(n=0);var a=Math.floor(n/60)%6,r=n/60-a,o=e*(1-t),i=e*(1-t*r),c=e*(1-t*(1-r)),u=[0,0,0];switch(a){case 0:u=[e,c,o];break;case 1:u=[i,e,o];break;case 2:u=[o,e,c];break;case 3:u=[o,i,e];break;case 4:u=[c,o,e];break;case 5:u=[e,o,i]}return u.map((function(n){return Math.floor(255*n)}))}function N(){return Y.apply(this,arguments)}function Y(){return(Y=Object(l.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",z()(M).then((function(n){return n.text()})).then((function(n){return new Date(n)})).catch((function(n){console.error(n)})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function A(n){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(u.a.mark((function n(t){var e,a,r,o,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=[D,P(t)],n.next=3,Promise.all(e.map((function(n){return z()(n).then((function(n){return n.text()})).then((function(n){return JSON.parse(n)})).catch((function(n){console.error(n)}))})));case 3:return a=n.sent,r=Object(s.a)(a,2),o=r[0],i=r[1],n.abrupt("return",Object.keys(i).map((function(n){var t=o[n],e=i[n];return{code:n,name:t.kjName,coordinates:[t.lon[0]+t.lon[1]/60,t.lat[0]+t.lat[1]/60],precipitation10m:e.precipitation10m&&0===e.precipitation10m[1]?e.precipitation10m[0]:null,precipitation1h:e.precipitation1h&&0===e.precipitation1h[1]?e.precipitation1h[0]:null,precipitation3h:e.precipitation3h&&0===e.precipitation3h[1]?e.precipitation3h[0]:null,precipitation24h:e.precipitation24h&&0===e.precipitation24h[1]?e.precipitation24h[0]:null,wind:e.wind&&e.windDirection&&0===e.wind[1]&&0===e.windDirection[1]?[e.wind[0],360*e.windDirection[0]/16]:null,temp:e.temp&&0===e.temp[1]?e.temp[0]:null,sun1h:e.sun1h&&0===e.sun1h[1]?e.sun1h[0]:null,snow:e.snow&&0===e.snow[1]?e.snow[0]:null,snow6h:e.snow6h&&0===e.snow6h[1]?e.snow6h[0]:null,snow12h:e.snow12h&&0===e.snow12h[1]?e.snow12h[0]:null,snow24h:e.snow24h&&0===e.snow24h[1]?e.snow24h[0]:null,humidity:e.humidity&&0===e.humidity[1]?e.humidity[0]:null}})));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var T=e(42),_={longitude:136,latitude:35,zoom:5,maxZoom:20,pitch:45,bearing:0},B={precipitation10m:{name:"10\u5206\u9593\u964d\u6c34\u91cf",min:0,max:40,colormap:function(n){return J(V(n,240,0),1,1)}},precipitation1h:{name:"1\u6642\u9593\u964d\u6c34\u91cf",min:0,max:80,colormap:function(n){return J(V(n,240,0),1,1)}},precipitation3h:{name:"3\u6642\u9593\u964d\u6c34\u91cf",min:0,max:150,colormap:function(n){return J(V(n,240,0),1,1)}},precipitation24h:{name:"24\u6642\u9593\u964d\u6c34\u91cf",min:0,max:300,colormap:function(n){return J(V(n,240,0),1,1)}},wind:{name:"\u98a8\u5411\u30fb\u98a8\u901f",min:0,max:25,colormap:function(n){return J(V(n,240,0),1,1)}},temp:{name:"\u6c17\u6e29",min:-10,max:30,colormap:function(n){return J(V(n,240,0),1,1)}},sun1h:{name:"\u65e5\u7167\u6642\u9593",min:0,max:1,colormap:function(n){return J(V(n,240,0),1,1)}},snow:{name:"\u7a4d\u96ea\u6df1",min:0,max:200,colormap:function(n){return J(V(n,240,0),1,1)}},snow6h:{name:"6\u6642\u9593\u964d\u96ea\u91cf",min:0,max:50,colormap:function(n){return J(V(n,240,0),1,1)}},snow12h:{name:"12\u6642\u9593\u964d\u96ea\u91cf",min:0,max:70,colormap:function(n){return J(V(n,240,0),1,1)}},snow24h:{name:"24\u6642\u9593\u964d\u96ea\u91cf",min:0,max:100,colormap:function(n){return J(V(n,240,0),1,1)}},humidity:{name:"\u6e7f\u5ea6",min:0,max:100,colormap:function(n){return J(V(n,240,0),1,1)}}},H=Object(w.a)((function(){return{title:{position:"absolute",top:10,left:10,zIndex:10,padding:10,background:b.palette.primary.background,opacity:b.palette.primary.opacity}}}));var L=function(){var n=H(),t=Object(a.useState)("temp"),e=Object(s.a)(t,2),r=e[0],o=e[1],i=Object(a.useState)(null),c=Object(s.a)(i,2),j=c[0],w=c[1],S=Object(a.useState)(null),z=Object(s.a)(S,2),F=z[0],D=z[1],M=Object(a.useState)(null),P=Object(s.a)(M,2),V=P[0],J=P[1];Object(a.useEffect)((function(){Object(l.a)(u.a.mark((function n(){var t,e;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N();case 2:return t=n.sent,n.next=5,A(t);case 5:e=n.sent,D(e),w(t);case 8:case"end":return n.stop()}}),n)})))()}),[]),Object(a.useEffect)((function(){Object(l.a)(u.a.mark((function n(){var t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(F){n.next=2;break}return n.abrupt("return");case 2:t=function(n){if("wind"===n){var t=F.map((function(t){var e=t[n]?E(t[n][0],B[n].min,B[n].max):null;return{code:t.code,name:t.name,coordinates:t.coordinates,normlizedValue:e,value:t[n],color:e?B[n].colormap(e):[0,0,0,32]}}));return Object(T.jsx)(v.a,{id:"gridcelllayer",data:t,pickable:!0,cellSize:5e3,extruded:!0,elevationScale:5e4,getPosition:function(n){return n.coordinates},getFillColor:function(n){return n.color},getElevation:function(n){return n.normlizedValue}})}var e=F.map((function(t){var e=E(t[n],B[n].min,B[n].max);return{code:t.code,name:t.name,coordinates:t.coordinates,normlizedValue:e,value:t[n],color:e?B[n].colormap(e):[0,0,0,32]}}));return Object(T.jsx)(v.a,{id:"gridcelllayer",data:e,pickable:!0,cellSize:5e3,extruded:!0,elevationScale:5e4,getPosition:function(n){return n.coordinates},getFillColor:function(n){return n.color},getElevation:function(n){return n.normlizedValue}})}(r),J(t);case 4:case"end":return n.stop()}}),n)})))()}),[F,r]);var Y=Object.keys(B).map((function(n){return Object(T.jsx)(p.a,{value:n,children:B[n].name},n)}));return Object(T.jsxs)(a.Fragment,{children:[Object(T.jsx)(x.a,{theme:b,children:Object(T.jsxs)(h.a,{className:n.title,children:[Object(T.jsx)(f.a,{variant:"h1",color:"primary",children:"JMA AMeDAS"}),Object(T.jsx)(h.a,{p:.5,children:Object(T.jsx)(f.a,{variant:"body1",color:"primary",children:C()(j).format()})}),Object(T.jsx)(h.a,{p:.5,children:Object(T.jsx)(d.a,{children:Object(T.jsx)(m.a,{value:r,onChange:function(n){return o(n.target.value)},children:Y})})})]})}),Object(T.jsxs)(O.a,{initialViewState:_,controller:!0,getTooltip:function(n){var t=n.object;return t&&"".concat(t.name,"\uff08").concat(t.code,"\uff09: ").concat(t.value)},children:[Object(T.jsx)(y.a,{id:"background-layer",data:[[[-180,90],[0,90],[180,90],[180,-90],[0,-90],[-180,-90]]],getPolygon:function(n){return n},filled:!0,getFillColor:[127,127,127]}),Object(T.jsx)(k.a,{id:"map-layer",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_50m_land.geojson",filled:!0,getFillColor:[64,64,64]}),V,Object(T.jsx)(g.a,{id:"map",width:"100%",controller:!0,repeat:!0})]})]})},W=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,257)).then((function(t){var e=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;e(n),a(n),r(n),o(n),i(n)}))};i.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(L,{})}),document.getElementById("root")),W()}},[[196,1,2]]]);