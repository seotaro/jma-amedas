(this["webpackJsonpjma-amedas"]=this["webpackJsonpjma-amedas"]||[]).push([[0],{157:function(n,e){},200:function(n,e,t){},207:function(n,e){},212:function(n,e,t){"use strict";t.r(e);var a=t(1),i=t.n(a),r=t(33),o=t.n(r),c=t(151),u=(t(200),t(69)),l=t.n(u),s=t(105),m=t(89),p=t(261),d=t(265),h=t(258),f=t(263),j=t(257),b=t(176),w=Object(b.a)({palette:{primary:{main:"#111111",background:"#eeeeee",opacity:.8},secondary:{main:"#eeeeee"}},typography:{fontFamily:["Noto Sans","sans-serif"].join(","),h1:{fontSize:24,fontWeight:"600"},body1:{fontSize:16,fontWeight:"300"}}}),x=t(251),O=t(256),g=t(260),v=t(270),y=t(174),k=t(268),S=t(271),V=t(180),z=t(181),M=t(179),C=t(264),F=t(43),P=t(152),D=t.n(P),E=t(127),A=t.n(E),T="https://www.jma.go.jp/bosai/amedas/const/amedastable.json",G="https://www.jma.go.jp/bosai/amedas/data/latest_time.txt",I=function(n){return"https://www.jma.go.jp/bosai/amedas/data/map/".concat(A()(n).format("YYYYMMDDHHmmss"),".json")};function J(n,e,t){return(n-e)/(t-e)}function N(n,e,t){return n<0?e:1<n?t:e*(1-n)+t*n}function Y(n,e,t){360<=n&&(n=0);var a=Math.floor(n/60)%6,i=n/60-a,r=t*(1-e),o=t*(1-e*i),c=t*(1-e*(1-i)),u=[0,0,0];switch(a){case 0:u=[t,c,r];break;case 1:u=[o,t,r];break;case 2:u=[r,t,c];break;case 3:u=[r,o,t];break;case 4:u=[c,r,t];break;case 5:u=[t,r,o]}return u.map((function(n){return Math.floor(255*n)}))}function L(){return R.apply(this,arguments)}function R(){return(R=Object(s.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",D()(G).then((function(n){return n.text()})).then((function(n){return new Date(n)})).catch((function(n){console.error(n)})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function W(n){return _.apply(this,arguments)}function _(){return(_=Object(s.a)(l.a.mark((function n(e){var t,a,i,r,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[T,I(e)],n.next=3,Promise.all(t.map((function(n){return D()(n).then((function(n){return n.text()})).then((function(n){return JSON.parse(n)})).catch((function(n){console.error(n)}))})));case 3:return a=n.sent,i=Object(m.a)(a,2),r=i[0],o=i[1],n.abrupt("return",Object.keys(o).map((function(n){var e=r[n],t=o[n];return{code:n,name:e.kjName,coordinates:[e.lon[0]+e.lon[1]/60,e.lat[0]+e.lat[1]/60],precipitation10m:t.precipitation10m&&0===t.precipitation10m[1]?t.precipitation10m[0]:null,precipitation1h:t.precipitation1h&&0===t.precipitation1h[1]?t.precipitation1h[0]:null,precipitation3h:t.precipitation3h&&0===t.precipitation3h[1]?t.precipitation3h[0]:null,precipitation24h:t.precipitation24h&&0===t.precipitation24h[1]?t.precipitation24h[0]:null,wind:t.wind&&t.windDirection&&0===t.wind[1]&&0===t.windDirection[1]?[t.wind[0],360*t.windDirection[0]/16]:null,temp:t.temp&&0===t.temp[1]?t.temp[0]:null,sun1h:t.sun1h&&0===t.sun1h[1]?t.sun1h[0]:null,snow:t.snow&&0===t.snow[1]?t.snow[0]:null,snow6h:t.snow6h&&0===t.snow6h[1]?t.snow6h[0]:null,snow12h:t.snow12h&&0===t.snow12h[1]?t.snow12h[0]:null,snow24h:t.snow24h&&0===t.snow24h[1]?t.snow24h[0]:null,humidity:t.humidity&&0===t.humidity[1]?t.humidity[0]:null}})));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var B=t(28),H={longitude:136,latitude:35,zoom:5,maxZoom:20,pitch:45,bearing:0},U={precipitation10m:{name:"10\u5206\u9593\u964d\u6c34\u91cf",unit:"mm",min:0,max:40,colormap:function(n){return Y(N(n,240,0),1,1)}},precipitation1h:{name:"1\u6642\u9593\u964d\u6c34\u91cf",unit:"mm",min:0,max:80,colormap:function(n){return Y(N(n,240,0),1,1)}},precipitation3h:{name:"3\u6642\u9593\u964d\u6c34\u91cf",unit:"mm",min:0,max:150,colormap:function(n){return Y(N(n,240,0),1,1)}},precipitation24h:{name:"24\u6642\u9593\u964d\u6c34\u91cf",unit:"mm",min:0,max:300,colormap:function(n){return Y(N(n,240,0),1,1)}},wind:{name:"\u98a8\u5411\u30fb\u98a8\u901f",unit:["m/s","\xb0"],min:0,max:25,colormap:function(n){return Y(N(n,240,0),1,1)}},temp:{name:"\u6c17\u6e29",unit:"\u2103",min:-10,max:30,colormap:function(n){return Y(N(n,240,0),1,1)}},sun1h:{name:"\u65e5\u7167\u6642\u9593",unit:"\u6642\u9593",min:0,max:1,colormap:function(n){return Y(N(n,240,0),1,1)}},snow:{name:"\u7a4d\u96ea\u6df1",unit:"cm",min:0,max:200,colormap:function(n){return Y(N(n,240,0),1,1)}},snow6h:{name:"6\u6642\u9593\u964d\u96ea\u91cf",unit:"cm",min:0,max:50,colormap:function(n){return Y(N(n,240,0),1,1)}},snow12h:{name:"12\u6642\u9593\u964d\u96ea\u91cf",unit:"cm",min:0,max:70,colormap:function(n){return Y(N(n,240,0),1,1)}},snow24h:{name:"24\u6642\u9593\u964d\u96ea\u91cf",unit:"cm",min:0,max:100,colormap:function(n){return Y(N(n,240,0),1,1)}},humidity:{name:"\u6e7f\u5ea6",unit:"%",min:0,max:100,colormap:function(n){return Y(N(n,240,0),1,1)}}},q=Object(x.a)((function(){return{title:{position:"absolute",top:10,left:10,zIndex:10,padding:10,background:w.palette.primary.background,opacity:w.palette.primary.opacity}}}));var Z=function(){var n=q(),e=Object(a.useState)("temp"),t=Object(m.a)(e,2),i=t[0],r=t[1],o=Object(a.useState)("column"),c=Object(m.a)(o,2),u=c[0],b=c[1],x=Object(a.useState)(null),P=Object(m.a)(x,2),D=P[0],E=P[1],T=Object(a.useState)(null),G=Object(m.a)(T,2),I=G[0],N=G[1],Y=Object(a.useState)(null),R=Object(m.a)(Y,2),_=R[0],Z=R[1],K=new URLSearchParams(Object(F.d)().search).get("viewType")||"MapView";Object(a.useEffect)((function(){Object(s.a)(l.a.mark((function n(){var e,t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L();case 2:return e=n.sent,n.next=5,W(e);case 5:t=n.sent,N(t),E(e);case 8:case"end":return n.stop()}}),n)})))()}),[]),Object(a.useEffect)((function(){switch(i){case"wind":"icon"!==u&&b("icon");break;default:"icon"===u&&b("column")}}),[i]),Object(a.useEffect)((function(){Object(s.a)(l.a.mark((function n(){var e,t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(I){n.next=2;break}return n.abrupt("return");case 2:e=2500,t=function(n){if("wind"===n){var t=I.map((function(e){var t=e[n]?[J(e[n][0],U[n].min,U[n].max),e[n][1]]:null;return{code:e.code,name:e.name,coordinates:e.coordinates,normlizedValue:t,value:e[n],color:null===t?[0,0,0,32]:U[n].colormap(t[0]),icon:null===t||0==t[1]?"dot":"arrow",angle:null===t?0:180-t[1]}}));return Object(B.jsx)(k.a,{id:"iconlayer",data:t,pickable:!0,iconAtlas:"wind-icon.png",iconMapping:"wind-icon.json",getIcon:function(n){return n.icon},getColor:function(n){return n.color},getPosition:function(n){return n.coordinates},billboard:!1,sizeUnits:"meters",sizeScale:10,getSize:function(n){return e},getAngle:function(n){return n.angle}})}var a=I.map((function(e){var t=null===e[n]?null:J(e[n],U[n].min,U[n].max);return{code:e.code,name:e.name,coordinates:e.coordinates,normlizedValue:t,value:e[n],color:null===t?[0,0,0,32]:U[n].colormap(t)}}));switch(u){case"gridcell":return Object(B.jsx)(S.a,{id:"gridcelllayer",data:a,pickable:!0,cellSize:5e3,extruded:!0,elevationScale:5e4,getPosition:function(n){return n.coordinates},getFillColor:function(n){return n.color},getElevation:function(n){return n.normlizedValue}});case"column":return Object(B.jsx)(V.a,{id:"columnlayer",data:a,pickable:!0,diskResolution:20,radius:e,extruded:!0,elevationScale:5e4,getPosition:function(n){return n.coordinates},getFillColor:function(n){return n.color},getElevation:function(n){return n.normlizedValue}});case"scatterplot":return Object(B.jsx)(z.a,{id:"scatterplotlayer",data:a,pickable:!0,opacity:.8,filled:!0,radiusScale:e,lineWidthMinPixels:1,getPosition:function(n){return n.coordinates},getRadius:function(n){return n.normlizedValue},getFillColor:function(n){return n.color}})}}(i),Z(t);case 5:case"end":return n.stop()}}),n)})))()}),[I,i,u]);var Q=Object.keys(U).map((function(n){return Object(B.jsx)(d.a,{value:n,children:U[n].name},n)})),X={column:{disabled:"wind"===i},gridcell:{disabled:"wind"===i},scatterplot:{disabled:"wind"===i},icon:{disabled:"wind"!==i}},$=Object.keys(X).map((function(n){return Object(B.jsx)(d.a,{value:n,disabled:X[n].disabled,children:n},n)}));return Object(B.jsxs)(a.Fragment,{children:[Object(B.jsx)(O.a,{theme:w,children:Object(B.jsxs)(f.a,{className:n.title,children:[Object(B.jsx)(j.a,{variant:"h1",color:"primary",children:"JMA AMeDAS"}),Object(B.jsx)(f.a,{p:.5,children:Object(B.jsx)(j.a,{variant:"body1",color:"primary",children:A()(D).format()})}),Object(B.jsx)(f.a,{p:.5,children:Object(B.jsx)(h.a,{children:Object(B.jsx)(p.a,{value:i,onChange:function(n){return r(n.target.value)},children:Q})})}),Object(B.jsx)(f.a,{p:.5,children:Object(B.jsx)(h.a,{children:Object(B.jsx)(p.a,{value:u,onChange:function(n){return b(n.target.value)},children:$})})}),Object(B.jsx)(f.a,{p:.5,children:Object(B.jsx)(h.a,{children:Object(B.jsx)(p.a,{value:K,onChange:function(n){window.location.href="?viewType=".concat(n.target.value)},children:[Object(B.jsx)(d.a,{value:"MapView",children:"MapView"},"MapView"),Object(B.jsx)(d.a,{value:"GlobeView",children:"GlobeView"},"GlobeView")]})})})]})}),Object(B.jsxs)(g.a,{initialViewState:H,controller:!0,getTooltip:function(n){var e=n.object;return e&&"".concat(e.name,"\uff08").concat(e.code,"\uff09: ")+(null===e.value?null:"wind"===i?"".concat(e.value[0]," [").concat(U[i].unit[0],"], ").concat(e.value[1]," [").concat(U[i].unit[1],"]"):"".concat(e.value," [").concat(U[i].unit,"]"))},children:[Object(B.jsx)(M.a,{id:"background-layer",data:[[[-180,90],[0,90],[180,90],[180,-90],[0,-90],[-180,-90]]],getPolygon:function(n){return n},filled:!0,getFillColor:[127,127,127]}),Object(B.jsx)(C.a,{id:"map-layer",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_50m_land.geojson",filled:!0,getFillColor:[64,64,64]}),_,"GlobeView"===K?Object(B.jsx)(v.a,{id:"map",width:"100%",controller:!0,resolution:1}):Object(B.jsx)(y.a,{id:"map",width:"100%",controller:!0,repeat:!0})]})]})},K=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,273)).then((function(e){var t=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,o=e.getTTFB;t(n),a(n),i(n),r(n),o(n)}))};o.a.render(Object(B.jsx)(i.a.StrictMode,{children:Object(B.jsx)(c.a,{children:Object(B.jsx)(Z,{})})}),document.getElementById("root")),K()}},[[212,1,2]]]);