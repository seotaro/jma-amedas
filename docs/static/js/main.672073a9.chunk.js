(this["webpackJsonpjma-amedas"]=this["webpackJsonpjma-amedas"]||[]).push([[0],{144:function(n,e){},187:function(n,e,t){},192:function(n,e){},199:function(n,e,t){"use strict";t.r(e);var a=t(1),r=t.n(a),i=t(33),o=t.n(i),c=(t(187),t(63)),u=t.n(c),l=t(97),s=t(82),p=t(248),m=t(252),d=t(245),f=t(250),h=t(244),b=t(161),j=Object(b.a)({palette:{primary:{main:"#111111",background:"#eeeeee",opacity:.8},secondary:{main:"#eeeeee"}},typography:{fontFamily:["Noto Sans","sans-serif"].join(","),h1:{fontSize:24,fontWeight:"600"},body1:{fontSize:16,fontWeight:"300"}}}),w=t(238),g=t(243),x=t(247),O=t(164),v=t(255),y=t(257),k=t(166),S=t(167),z=t(165),C=t(251),F=t(141),M=t.n(F),P=t(119),D=t.n(P),E="https://www.jma.go.jp/bosai/amedas/const/amedastable.json",V="https://www.jma.go.jp/bosai/amedas/data/latest_time.txt",A=function(n){return"https://www.jma.go.jp/bosai/amedas/data/map/".concat(D()(n).format("YYYYMMDDHHmmss"),".json")},I=function(n,e,t){return null===n?null:(n-e)/(t-e)},J=function(n,e,t){return null===n?null:e*(1-n)+t*n};function N(n,e,t){360<=n&&(n=0);var a=Math.floor(n/60)%6,r=n/60-a,i=t*(1-e),o=t*(1-e*r),c=t*(1-e*(1-r)),u=[0,0,0];switch(a){case 0:u=[t,c,i];break;case 1:u=[o,t,i];break;case 2:u=[i,t,c];break;case 3:u=[i,o,t];break;case 4:u=[c,i,t];break;case 5:u=[t,i,o]}return u.map((function(n){return Math.floor(255*n)}))}function Y(){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",M()(V).then((function(n){return n.text()})).then((function(n){return new Date(n)})).catch((function(n){console.error(n)})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function W(n){return _.apply(this,arguments)}function _(){return(_=Object(l.a)(u.a.mark((function n(e){var t,a,r,i,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[E,A(e)],n.next=3,Promise.all(t.map((function(n){return M()(n).then((function(n){return n.text()})).then((function(n){return JSON.parse(n)})).catch((function(n){console.error(n)}))})));case 3:return a=n.sent,r=Object(s.a)(a,2),i=r[0],o=r[1],n.abrupt("return",Object.keys(o).map((function(n){var e=i[n],t=o[n];return{code:n,name:e.kjName,coordinates:[e.lon[0]+e.lon[1]/60,e.lat[0]+e.lat[1]/60],precipitation10m:t.precipitation10m&&0===t.precipitation10m[1]?t.precipitation10m[0]:null,precipitation1h:t.precipitation1h&&0===t.precipitation1h[1]?t.precipitation1h[0]:null,precipitation3h:t.precipitation3h&&0===t.precipitation3h[1]?t.precipitation3h[0]:null,precipitation24h:t.precipitation24h&&0===t.precipitation24h[1]?t.precipitation24h[0]:null,wind:t.wind&&t.windDirection&&0===t.wind[1]&&0===t.windDirection[1]?[t.wind[0],360*t.windDirection[0]/16]:null,temp:t.temp&&0===t.temp[1]?t.temp[0]:null,sun1h:t.sun1h&&0===t.sun1h[1]?t.sun1h[0]:null,snow:t.snow&&0===t.snow[1]?t.snow[0]:null,snow6h:t.snow6h&&0===t.snow6h[1]?t.snow6h[0]:null,snow12h:t.snow12h&&0===t.snow12h[1]?t.snow12h[0]:null,snow24h:t.snow24h&&0===t.snow24h[1]?t.snow24h[0]:null,humidity:t.humidity&&0===t.humidity[1]?t.humidity[0]:null}})));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var B=t(31),H={longitude:136,latitude:35,zoom:5,maxZoom:20,pitch:45,bearing:0},L={precipitation10m:{name:"10\u5206\u9593\u964d\u6c34\u91cf",min:0,max:40,colormap:function(n){return N(J(n,240,0),1,1)}},precipitation1h:{name:"1\u6642\u9593\u964d\u6c34\u91cf",min:0,max:80,colormap:function(n){return N(J(n,240,0),1,1)}},precipitation3h:{name:"3\u6642\u9593\u964d\u6c34\u91cf",min:0,max:150,colormap:function(n){return N(J(n,240,0),1,1)}},precipitation24h:{name:"24\u6642\u9593\u964d\u6c34\u91cf",min:0,max:300,colormap:function(n){return N(J(n,240,0),1,1)}},wind:{name:"\u98a8\u5411\u30fb\u98a8\u901f",min:0,max:25,colormap:function(n){return N(J(n,240,0),1,1)}},temp:{name:"\u6c17\u6e29",min:-10,max:30,colormap:function(n){return N(J(n,240,0),1,1)}},sun1h:{name:"\u65e5\u7167\u6642\u9593",min:0,max:1,colormap:function(n){return N(J(n,240,0),1,1)}},snow:{name:"\u7a4d\u96ea\u6df1",min:0,max:200,colormap:function(n){return N(J(n,240,0),1,1)}},snow6h:{name:"6\u6642\u9593\u964d\u96ea\u91cf",min:0,max:50,colormap:function(n){return N(J(n,240,0),1,1)}},snow12h:{name:"12\u6642\u9593\u964d\u96ea\u91cf",min:0,max:70,colormap:function(n){return N(J(n,240,0),1,1)}},snow24h:{name:"24\u6642\u9593\u964d\u96ea\u91cf",min:0,max:100,colormap:function(n){return N(J(n,240,0),1,1)}},humidity:{name:"\u6e7f\u5ea6",min:0,max:100,colormap:function(n){return N(J(n,240,0),1,1)}}},R=Object(w.a)((function(){return{title:{position:"absolute",top:10,left:10,zIndex:10,padding:10,background:j.palette.primary.background,opacity:j.palette.primary.opacity}}}));var q=function(){var n=R(),e=Object(a.useState)("temp"),t=Object(s.a)(e,2),r=t[0],i=t[1],o=Object(a.useState)("gridcell"),c=Object(s.a)(o,2),b=c[0],w=c[1],F=Object(a.useState)(null),M=Object(s.a)(F,2),P=M[0],E=M[1],V=Object(a.useState)(null),A=Object(s.a)(V,2),J=A[0],N=A[1],T=Object(a.useState)(null),_=Object(s.a)(T,2),q=_[0],U=_[1];Object(a.useEffect)((function(){Object(l.a)(u.a.mark((function n(){var e,t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Y();case 2:return e=n.sent,n.next=5,W(e);case 5:t=n.sent,N(t),E(e);case 8:case"end":return n.stop()}}),n)})))()}),[]),Object(a.useEffect)((function(){switch(r){case"wind":"icon"!==b&&w("icon");break;default:"icon"===b&&w("gridcell")}}),[r]),Object(a.useEffect)((function(){Object(l.a)(u.a.mark((function n(){var e,t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(J){n.next=2;break}return n.abrupt("return");case 2:e=2500,t=function(n){if("wind"===n){var t=J.map((function(e){var t=e[n]?[I(e[n][0],L[n].min,L[n].max),e[n][1]]:null;return{code:e.code,name:e.name,coordinates:e.coordinates,normlizedValue:t,value:e[n],color:null===t?[0,0,0,32]:L[n].colormap(t[0]),icon:null===t||0==t[1]?"dot":"arrow",angle:null===t?0:180-t[1]}}));return Object(B.jsx)(v.a,{id:"iconlayer",data:t,pickable:!0,iconAtlas:"arrow.png",iconMapping:"arrow.json",getIcon:function(n){return n.icon},getColor:function(n){return n.color},getPosition:function(n){return n.coordinates},billboard:!1,sizeUnits:"meters",sizeScale:10,getSize:function(n){return e},getAngle:function(n){return n.angle}})}var a=J.map((function(e){var t=I(e[n],L[n].min,L[n].max);return{code:e.code,name:e.name,coordinates:e.coordinates,normlizedValue:t,value:e[n],color:null===t?[0,0,0,32]:L[n].colormap(t)}}));switch(b){case"gridcell":return Object(B.jsx)(y.a,{id:"gridcelllayer",data:a,pickable:!0,cellSize:5e3,extruded:!0,elevationScale:5e4,getPosition:function(n){return n.coordinates},getFillColor:function(n){return n.color},getElevation:function(n){return n.normlizedValue}});case"column":return Object(B.jsx)(k.a,{id:"columnlayer",data:a,pickable:!0,diskResolution:20,radius:e,extruded:!0,elevationScale:5e4,getPosition:function(n){return n.coordinates},getFillColor:function(n){return n.color},getElevation:function(n){return n.normlizedValue}});case"scatterplot":return Object(B.jsx)(S.a,{id:"scatterplotlayer",data:a,pickable:!0,opacity:.8,filled:!0,radiusScale:e,lineWidthMinPixels:1,getPosition:function(n){return n.coordinates},getRadius:function(n){return n.normlizedValue},getFillColor:function(n){return n.color}})}}(r),U(t);case 5:case"end":return n.stop()}}),n)})))()}),[J,r,b]);var Z=Object.keys(L).map((function(n){return Object(B.jsx)(m.a,{value:n,children:L[n].name},n)})),G={gridcell:{disabled:"wind"===r},column:{disabled:"wind"===r},scatterplot:{disabled:"wind"===r},icon:{disabled:"wind"!==r}},K=Object.keys(G).map((function(n){return Object(B.jsx)(m.a,{value:n,disabled:G[n].disabled,children:n},n)}));return Object(B.jsxs)(a.Fragment,{children:[Object(B.jsx)(g.a,{theme:j,children:Object(B.jsxs)(f.a,{className:n.title,children:[Object(B.jsx)(h.a,{variant:"h1",color:"primary",children:"JMA AMeDAS"}),Object(B.jsx)(f.a,{p:.5,children:Object(B.jsx)(h.a,{variant:"body1",color:"primary",children:D()(P).format()})}),Object(B.jsx)(f.a,{p:.5,children:Object(B.jsx)(d.a,{children:Object(B.jsx)(p.a,{value:r,onChange:function(n){return i(n.target.value)},children:Z})})}),Object(B.jsx)(f.a,{p:.5,children:Object(B.jsx)(d.a,{children:Object(B.jsx)(p.a,{value:b,onChange:function(n){return w(n.target.value)},children:K})})})]})}),Object(B.jsxs)(x.a,{initialViewState:H,controller:!0,getTooltip:function(n){var e=n.object;return e&&"".concat(e.name,"\uff08").concat(e.code,"\uff09: ").concat(e.value)},children:[Object(B.jsx)(z.a,{id:"background-layer",data:[[[-180,90],[0,90],[180,90],[180,-90],[0,-90],[-180,-90]]],getPolygon:function(n){return n},filled:!0,getFillColor:[127,127,127]}),Object(B.jsx)(C.a,{id:"map-layer",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_50m_land.geojson",filled:!0,getFillColor:[64,64,64]}),q,Object(B.jsx)(O.a,{id:"map",width:"100%",controller:!0,repeat:!0})]})]})},U=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,259)).then((function(e){var t=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;t(n),a(n),r(n),i(n),o(n)}))};o.a.render(Object(B.jsx)(r.a.StrictMode,{children:Object(B.jsx)(q,{})}),document.getElementById("root")),U()}},[[199,1,2]]]);